{"version":3,"sources":["app.js","config.js","donate.js","donation-service.js","environment.js","home.js","login.js","logout.js","main.js","report.js","welcome.js","resources/index.js","/Users/edeleastar/repos/modules/web-2/web-app-2016/prj/donation-client-2/src/app.html","/Users/edeleastar/repos/modules/web-2/web-app-2016/prj/donation-client-2/src/donate.html","/Users/edeleastar/repos/modules/web-2/web-app-2016/prj/donation-client-2/src/home.html","/Users/edeleastar/repos/modules/web-2/web-app-2016/prj/donation-client-2/src/login.html","/Users/edeleastar/repos/modules/web-2/web-app-2016/prj/donation-client-2/src/logout.html","/Users/edeleastar/repos/modules/web-2/web-app-2016/prj/donation-client-2/src/nav-bar.html","/Users/edeleastar/repos/modules/web-2/web-app-2016/prj/donation-client-2/src/report.html","/Users/edeleastar/repos/modules/web-2/web-app-2016/prj/donation-client-2/src/welcome.html"],"names":[],"mappings":";;;;;;;;;;;;;;;;MAGa,cAAA,cADZ;AAEC,iBAAY,OAAZ,EAAqB;AAAA;;AACnB,WAAK,OAAL,GAAe,OAAf;AACD;;kBAED,2CAAgB,QAAQ,QAAQ;AAC9B,aAAO,KAAP,GAAe,UAAf;;AAEA,aAAO,GAAP,CAAW,CACT,EAAE,OAAO,CAAC,EAAD,EAAK,SAAL,CAAT,EAA0B,MAAM,SAAhC,EAAiD,UAAU,SAA3D,EAA4E,KAAK,IAAjF,EAAuF,OAAO,SAA9F,EADS,EAET,EAAE,OAAO,OAAT,EAA0B,MAAM,OAAhC,EAAiD,UAAU,OAA3D,EAA4E,KAAK,IAAjF,EAAuF,OAAO,OAA9F,EAFS,EAGT,EAAE,OAAO,QAAT,EAA0B,MAAM,QAAhC,EAAiD,UAAU,QAA3D,EAA4E,KAAK,IAAjF,EAAuF,OAAO,QAA9F,EAHS,CAAX;;AAMA,aAAO,gBAAP,CAAwB,uBAAe;AACrC,eAAO,SAAP;AACD,OAFD;;AAIA,WAAK,MAAL,GAAc,MAAd;AACD;;;;;;;;;;;oBCpBY;AACb,aAAS,uBADI;AAEb,cAAU,kBAFG;AAGb,eAAW;AAHE;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCIF,iBAAA,iBADZ;AAUC,oBAAY,IAAZ,EAAkB,eAAlB,EAAmC;AAAA;;AAAA,WARnC,OAQmC,GARzB,QAQyB;AAAA,WANnC,UAMmC,GANtB,EAMsB;AAAA,WALnC,iBAKmC,GALf,EAKe;AAAA,WAHnC,OAGmC,GAHzB,CAAC,MAAD,EAAS,QAAT,CAGyB;AAAA,WAFnC,cAEmC,GAFlB,CAEkB;;AACjC,WAAK,eAAL,GAAuB,eAAvB;AACD;;qBAED,+BAAW;AAAA;;AACT,WAAK,eAAL,CAAqB,aAArB,GACG,IADH,CACQ,oBAAY;AAChB,cAAK,UAAL,GAAkB,SAAS,OAA3B;AACD,OAHH;AAID;;qBAED,uCAAe;AACb,WAAK,eAAL,CAAqB,MAArB,CAA4B,KAAK,MAAjC,EAA0C,KAAK,cAA/C,EAA+D,KAAK,iBAApE,EACG,IADH,CACQ,oBAAY;AAChB,gBAAQ,GAAR,CAAY,uBAAuB,SAAS,OAAT,CAAiB,GAApD;AACD,OAHH,EAIG,KAJH,CAIS,iBAAS;AACd,gBAAQ,GAAR,CAAY,uBAAZ;AACD,OANH;AAOD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC7BkB,0BADpB;AAIC,6BAAY,OAAZ,EAAqB,UAArB,EAAiC;AAAA;;AAAA,WAFjC,OAEiC,GAFvB,IAEuB;;AAC/B,iBAAW,SAAX,CAAqB,gBAAQ;AAC3B,aAAK,WAAL,CAAiB,iBAAO,OAAxB;AACD,OAFD;AAGA,WAAK,IAAL,GAAY,UAAZ;AACA,WAAK,GAAL,GAAW,OAAX;AAGD;;8BAED,+CAAmB;AAAA;;AACjB,WAAK,OAAL,GAAe,KAAK,KAAL,CAAW,aAAa,iBAAO,SAApB,KAAkC,IAA7C,CAAf;;AAEA,UAAI,KAAK,OAAT,EAAkB;AAAA;AAChB,cAAM,QAAQ,aAAa,iBAAO,SAApB,CAAd;AACA,cAAM,WAAW,KAAK,KAAL,CAAW,KAAX,CAAjB;AACA,gBAAK,IAAL,CAAU,SAAV,CAAoB,kBAAU;AAC5B,mBAAO,UAAP,CAAkB,eAAlB,EAAmC,YAAY,SAAS,KAAxD;AACD,WAFD;AAHgB;AAMjB;AACF;;8BAED,uBAAM,OAAO,UAAU;AAAA;;AACrB,aAAO,KAAK,IAAL,CAAU,IAAV,CAAe,iBAAO,QAAtB,EAAgC,EAAE,YAAF,EAAS,kBAAT,EAAhC,EACJ,IADI,CACC,oBAAY;AAChB,YAAI,UAAJ;AACA,eAAO,IAAI,OAAJ,CAAY,UAAU,OAAV,EAAmB,MAAnB,EAA2B;AAC5C,cAAI,SAAS,OAAT,CAAiB,OAArB,EAA8B;AAC5B,yBAAa,iBAAO,SAApB,IAAiC,KAAK,SAAL,CAAe,SAAS,OAAxB,CAAjC;AACA,cAAE,IAAF,CAAO,SAAP,CAAiB,kBAAU;AACzB,qBAAO,UAAP,CAAkB,eAAlB,EAAmC,YAAY,SAAS,OAAT,CAAiB,KAAhE;AACA,gBAAE,OAAF,GAAY,SAAS,OAAT,CAAiB,KAA7B;AACD,aAHD;AAID;AACD,kBAAQ,SAAS,OAAjB;AACD,SATM,CAAP;AAUD,OAbI,EAcJ,KAdI,CAcG,iBAAS;AACf,gBAAQ,GAAR,CAAa,KAAb;AACD,OAhBI,CAAP;AAiBD;;8BAED,2BAAS;AACP,mBAAa,iBAAO,SAApB,IAAiC,IAAjC;AACA,WAAK,OAAL,GAAe,IAAf;AACD;;8BAED,6CAAkB;AAChB,aAAO,KAAK,OAAL,KAAiB,IAAxB;AACD;;8BAED,yCAAgB;AACd,aAAO,KAAK,IAAL,CAAU,GAAV,CAAc,iBAAd,CAAP;AACD;;8BAGD,uCAAe;AACb,aAAO,KAAK,IAAL,CAAU,GAAV,CAAc,gBAAd,CAAP;AACD;;8BAED,yBAAO,QAAQ,QAAQ,WAAW;AAChC,cAAQ,GAAR,CAAY,SAAS,cAAT,GAA0B,UAAU,SAApC,GAAgD,GAAhD,GAAsD,UAAU,QAAhE,GAA2E,IAA3E,GAAkF,MAA9F;;AAEA,UAAI,WAAW;AACb,gBAAQ,MADK;AAEb,gBAAQ;AAFK,OAAf;;AAKA,aAAO,KAAK,IAAL,CAAU,IAAV,CAAe,qBAAqB,UAAU,GAA/B,GAAqC,YAApD,EAAkE,QAAlE,CAAP;AACD;;;;oBAxEkB;;;;;;;;oBCLN;AACb,WAAO,IADM;AAEb,aAAS;AAFI;;;;;;;;;;;;;;;;;;MCGF,eAAA,eADZ;AAGC,kBAAY,OAAZ,EAAqB;AAAA;;AACnB,WAAK,OAAL,GAAe,OAAf;AACD;;mBAED,2CAAgB,QAAQ,QAAQ;AAC9B,aAAO,KAAP,GAAe,UAAf;AACA,aAAO,GAAP,CAAW,CACT,EAAE,OAAO,CAAC,EAAD,EAAK,MAAL,CAAT,EAAuB,MAAM,QAA7B,EAA8C,UAAU,QAAxD,EAAyE,KAAK,IAA9E,EAAoF,OAAO,QAA3F,EAAsG,MAAM,IAA5G,EADS,EAET,EAAE,OAAO,QAAT,EAA0B,MAAM,QAAhC,EAAiD,UAAU,QAA3D,EAA4E,KAAK,IAAjF,EAAuF,OAAO,QAA9F,EAAyG,MAAM,IAA/G,EAFS,EAGT,EAAE,OAAO,QAAT,EAA0B,MAAM,QAAhC,EAAiD,UAAU,QAA3D,EAA4E,KAAK,IAAjF,EAAuF,OAAO,QAA9F,EAAyG,MAAM,IAA/G,EAHS,CAAX;;AAMA,aAAO,gBAAP,CAAwB,uBAAe;AACrC,eAAO,QAAP;AACD,OAFD;;AAIA,WAAK,MAAL,GAAc,MAAd;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MCjBU,gBAAA,gBADZ;AAMC,mBAAY,OAAZ,EAAqB,eAArB,EAAsC,MAAtC,EAA8C;AAAA;;AAAA,WAJ9C,KAI8C,GAJtC,mBAIsC;AAAA,WAH9C,QAG8C,GAHnC,QAGmC;AAAA,WAF9C,QAE8C,GAFnC,EAEmC;;AAC5C,WAAK,eAAL,GAAuB,eAAvB;AACA,WAAK,OAAL,GAAe,OAAf;AACA,WAAK,MAAL,GAAc,EAAd;AACD;;oBAED,yBAAQ;AAAA;;AACN,UAAI,KAAK,KAAL,IAAc,KAAK,QAAvB,EAAiC;AAC/B,aAAK,eAAL,CAAqB,KAArB,CAA2B,KAAK,KAAhC,EAAuC,KAAK,QAA5C,EACG,IADH,CACQ,oBAAY;AAChB,kBAAQ,GAAR,CAAY,QAAZ;AACA,cAAI,SAAS,OAAb,EAAsB;AACpB,kBAAK,OAAL,CAAa,OAAb,CAAqB,MAArB;AACD,WAFD,MAEO;AACL,kBAAK,MAAL,GAAc,SAAS,OAAvB;AACD;AACF,SARH;AASD,OAVD,MAWK;AACH,aAAK,MAAL,GAAc,4CAAd;AACD;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MC1BU,iBAAA,iBADZ;AAIC,oBAAY,OAAZ,EAAqB,eAArB,EAAsC,MAAtC,EAA8C;AAAA;;AAAA,WAF9C,OAE8C,GAFpC,QAEoC;;AAC5C,WAAK,OAAL,GAAe,OAAf;AACA,WAAK,eAAL,GAAuB,eAAvB;AACA,WAAK,MAAL,GAAc,MAAd;AACD;;qBAED,2BAAQ;AAAA;;AACN,cAAQ,GAAR,CAAa,aAAb;AACA,WAAK,eAAL,CAAqB,MAArB;AACA,WAAK,OAAL,CAAa,OAAb,CAAqB,KAArB,EAA4B,IAA5B,CAAiC,YAAM;AACrC,cAAK,MAAL,CAAY,eAAZ,CAA4B,SAA5B;AACD,OAFD,EAEI,KAFJ,CAEU,YAAM;AACd,eAAO,KAAP,CAAa,8BAAb;AACD,OAJD;AAKD;;;;;;;;;;;UCZa,YAAA;;;;;;;;;;AANhB,UAAQ,MAAR,CAAe;AACb,cAAU;AACR,wBAAkB;AADV;AADG,GAAf;;AAMO,WAAS,SAAT,CAAmB,OAAnB,EAA4B;AACjC,YAAQ,GAAR,CACG,qBADH,GAEG,OAFH,CAEW,WAFX;;AAIA,QAAI,sBAAY,KAAhB,EAAuB;AACrB,cAAQ,GAAR,CAAY,kBAAZ;AACD;;AAED,QAAI,sBAAY,OAAhB,EAAyB;AACvB,cAAQ,GAAR,CAAY,MAAZ,CAAmB,iBAAnB;AACD;;AAED,YAAQ,KAAR,GAAgB,IAAhB,CAAqB;AAAA,aAAM,QAAQ,OAAR,EAAN;AAAA,KAArB;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;MCpBY,iBAAA,iBADZ;AAMC,oBAAY,eAAZ,EAA6B;AAAA;;AAAA,WAJ7B,OAI6B,GAJnB,QAImB;AAAA,WAF7B,SAE6B,GAFjB,EAEiB;;AAC3B,WAAK,eAAL,GAAuB,eAAvB;AACD;;qBAED,+BAAW;AAAA;;AACT,WAAK,eAAL,CAAqB,YAArB,GACG,IADH,CACQ,oBAAY;AAChB,cAAK,SAAL,GAAiB,SAAS,OAA1B;AACD,OAHH;AAID;;;;;;;;;;;;;;;;;;MClBU,kBAAA;AAGX,uBAAc;AAAA;;AAAA,WAFd,OAEc,GAFJ,SAEI;AACb;;sBAED,+BAAW,CACV;;;;;;;;;;;UCPa,YAAA;AAAT,WAAS,SAAT,CAAmB,MAAnB,EAA2B,CAEjC;;ACFD;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA;ACAA","file":"app-bundle.js","sourcesContent":["import { inject, Aurelia } from 'aurelia-framework';\n\n@inject(Aurelia)\nexport class App {\n  constructor(Aurelia) {\n    this.aurelia = Aurelia;\n  }\n\n  configureRouter(config, router) {\n    config.title = 'Donation';\n\n    config.map([\n      { route: ['', 'welcome'], name: 'welcome',       moduleId: 'welcome',       nav: true, title: 'Welcome' },\n      { route: 'login',         name: 'login',         moduleId: 'login',         nav: true, title: 'Login'  },\n      { route: 'signup',        name: 'signup',        moduleId: 'signup',        nav: true, title: 'Signup' },\n    ]);\n\n    config.mapUnknownRoutes(instruction => {\n      return 'welcome';\n    });\n\n    this.router = router;\n  }\n}\n","// The confic could be part of a larger config file. If this service\n// was abstracted to a plugin, it could be set up in the config.\nexport default {\n  baseUrl: 'http://localhost:4000',\n  loginUrl: 'api/authenticate',\n  tokenName: 'donation'\n};\n","import {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-http-client';\nimport DonationService from 'donation-service';\nimport config from 'config';\n\n@inject(HttpClient, DonationService)\nexport class Donate {\n  heading = 'Donate';\n\n  candidates = [];\n  selectedCandidate = {};\n\n  methods = [\"Cash\", \"PayPal\"];\n  selectedMethod = 1;\n\n  constructor(http, DonationService) {\n    this.donationService = DonationService;\n  }\n\n  activate() {\n    this.donationService.getCandidates()\n      .then(response => {\n        this.candidates = response.content;\n      });\n  }\n\n  makeDonation() {\n    this.donationService.donate(this.amount,  this.selectedMethod, this.selectedCandidate)\n      .then(response => {\n        console.log('Saved donation id:' + response.content._id);\n      })\n      .catch(error => {\n        console.log('Error saving Donation');\n      });\n  }\n}\n","import {Aurelia, inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-http-client';\nimport config from 'config';\n\n@inject(Aurelia, HttpClient)\nexport default class DonationService {\n  session = null;\n\n  constructor(Aurelia, HttpClient) {\n    HttpClient.configure(http => {\n      http.withBaseUrl(config.baseUrl);\n    });\n    this.http = HttpClient;\n    this.app = Aurelia;\n\n    //this.configureSession();\n  }\n\n  configureSession() {\n    this.session = JSON.parse(localStorage[config.tokenName] || null);\n\n    if (this.session) {\n      const token = localStorage[config.tokenName];\n      const tokenObj = JSON.parse(token);\n      this.http.configure(config => {\n        config.withHeader('Authorization', 'bearer ' + tokenObj.token);\n      });\n    }\n  }\n\n  login(email, password) {\n    return this.http.post(config.loginUrl, { email, password })\n      .then(response => {\n        var a = this;\n        return new Promise(function (resolve, reject) {\n          if (response.content.success) {\n            localStorage[config.tokenName] = JSON.stringify(response.content);\n            a.http.configure(config => {\n              config.withHeader('Authorization', 'bearer ' + response.content.token);\n              a.session = response.content.token;\n            });\n          }\n          resolve(response.content);\n        });\n      })\n      .catch (error => {\n        console.log (error);\n      });\n  }\n\n  logout() {\n    localStorage[config.tokenName] = null;\n    this.session = null;\n  }\n\n  isAuthenticated() {\n    return this.session !== null;\n  }\n\n  getCandidates() {\n    return this.http.get('/api/candidates');\n  }\n\n\n  getDonations() {\n    return this.http.get('/api/donations');\n  }\n\n  donate(amount, method, candidate) {\n    console.log(amount + ' donated to ' + candidate.firstName + ' ' + candidate.lastName + ': ' + method);\n\n    let donation = {\n      amount: amount,\n      method: method,\n    };\n\n    return this.http.post('/api/candidates/' + candidate._id + '/donations', donation);\n  }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import { inject, Aurelia } from 'aurelia-framework';\n\n@inject(Aurelia)\nexport class Home {\n\n  constructor(aurelia) {\n    this.aurelia = aurelia;\n  }\n\n  configureRouter(config, router) {\n    config.title = 'Donation';\n    config.map([\n      { route: ['', 'home'], name: 'donate',        moduleId: 'donate',        nav: true, title: 'Donate' , auth: true },\n      { route: 'report',        name: 'report',        moduleId: 'report',        nav: true, title: 'Report' , auth: true },\n      { route: 'logout',        name: 'logout',        moduleId: 'logout',        nav: true, title: 'Logout' , auth: true },\n    ]);\n\n    config.mapUnknownRoutes(instruction => {\n      return 'donate';\n    });\n\n    this.router = router;\n  }\n}\n","import DonationService from 'donation-service';\nimport {Aurelia, inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\n\n@inject(Aurelia, DonationService, Router)\nexport class Login {\n  email = 'homer@simpson.com';\n  password = 'secret';\n  response = ''\n\n  constructor(Aurelia, DonationService, Router) {\n    this.donationService = DonationService;\n    this.aurelia = Aurelia;\n    this.prompt = '';\n  }\n\n  login() {\n    if (this.email && this.password) {\n      this.donationService.login(this.email, this.password)\n        .then(response => {\n          console.log(response);\n          if (response.success) {\n            this.aurelia.setRoot('home');\n          } else {\n            this.prompt = response.message;\n          }\n        });\n    }\n    else {\n      this.prompt = 'Please enter a valid username and password';\n    }\n  }\n}\n\n","import DonationService from 'donation-service';\nimport { Aurelia, inject } from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\n\n@inject(Aurelia, DonationService, Router)\nexport class Logout {\n  heading = 'Logout';\n\n  constructor(Aurelia, DonationService, Router) {\n    this.aurelia = Aurelia;\n    this.donationService = DonationService;\n    this.router = Router;\n  }\n\n  logout(){\n    console.log ('logging out');\n    this.donationService.logout();\n    this.aurelia.setRoot('app').then(() => {\n      this.router.navigateToRoute('welcome');\n    }) .catch(() => {\n      logger.error('Error setting root to \"home\"');\n    });\n  }\n}\n\n","import environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from 'aurelia-framework';\nimport DonationService from 'donation-service';\n\n@inject(DonationService)\nexport class Report {\n  heading = 'Report';\n\n  donations = [];\n\n  constructor(DonationService) {\n    this.donationService = DonationService;\n  }\n\n  activate() {\n    this.donationService.getDonations()\n      .then(response => {\n        this.donations = response.content;\n      });\n  }\n}\n","export class Welcome {\n  heading = 'Welcome';\n\n  constructor() {\n  }\n\n  activate() {\n  }\n}\n\n","export function configure(config) {\n  //config.globalResources([]);\n}\n",null,null,null,null,null,null,null,null],"sourceRoot":"../src"}